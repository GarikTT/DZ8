Script started on 2023-05-15 00:42:05+07:00 [TERM="xterm" TTY="/dev/pts/0" COLUMNS="173" LINES="46"]
[?2004h]0;garik@garik-VirtualBox: ~/DZ/DZ7-4garik@garik-VirtualBox:~/DZ/DZ7-4$ 2.vagrant up[1P[1P
[?2004l[0mBringing machine 'lvm' up with 'virtualbox' provider...[0m
[1;33m==> lvm: You assigned a static IP ending in ".1" to this machine.
==> lvm: This is very often used by the router and can cause the
==> lvm: network to not work properly. If the network doesn't work
==> lvm: properly, try changing this IP.[0m
[1m==> lvm: Importing base box 'centos/7'...[0m
[0m[K[0m[0mProgress: 20%[0m[0m[K[0m[0mProgress: 40%[0m[0m[K[0m[0mProgress: 70%[0m[0m[K[0m[0mProgress: 90%[0m[0m[K[0m[1m==> lvm: Matching MAC address for NAT networking...[0m
[1;33m==> lvm: You assigned a static IP ending in ".1" to this machine.
==> lvm: This is very often used by the router and can cause the
==> lvm: network to not work properly. If the network doesn't work
==> lvm: properly, try changing this IP.[0m
[1m==> lvm: Checking if box 'centos/7' version '1804.02' is up to date...[0m
[1;33m==> lvm: There was a problem while downloading the metadata for your box
==> lvm: to check for updates. This is not an error, since it is usually due
==> lvm: to temporary network problems. This is just a warning. The problem
==> lvm: encountered was:
==> lvm: 
==> lvm: The requested URL returned error: 404
==> lvm: 
==> lvm: If you want to check for box updates, verify your network connection
==> lvm: is valid and try again.[0m
[1m==> lvm: Setting the name of the VM: DZ7-4_lvm_1684086154659_33286[0m
[1m==> lvm: Fixed port collision for 22 => 2222. Now on port 2200.[0m
[1m==> lvm: Clearing any previously set network interfaces...[0m
[1m==> lvm: Preparing network interfaces based on configuration...[0m
[0m    lvm: Adapter 1: nat[0m
[0m    lvm: Adapter 2: hostonly[0m
[1m==> lvm: Forwarding ports...[0m
[0m    lvm: 22 (guest) => 2200 (host) (adapter 1)[0m
[1m==> lvm: Running 'pre-boot' VM customizations...[0m
[1m==> lvm: Booting VM...[0m
[1m==> lvm: Waiting for machine to boot. This may take a few minutes...[0m
[0m    lvm: SSH address: 127.0.0.1:2200[0m
[0m    lvm: SSH username: vagrant[0m
[0m    lvm: SSH auth method: private key[0m
[0m    lvm: 
    lvm: Vagrant insecure key detected. Vagrant will automatically replace
    lvm: this with a newly generated keypair for better security.[0m
[0m    lvm: 
    lvm: Inserting generated public key within guest...[0m
[0m    lvm: Removing insecure key from the guest if it's present...[0m
[0m    lvm: Key inserted! Disconnecting and reconnecting using new SSH key...[0m
[1m==> lvm: Machine booted and ready![0m
[0;33m[lvm] No Virtualbox Guest Additions installation found.[0m
[0mLoaded plugins: fastestmirror
[0m[0mLoading mirror speeds from cached hostfile
[0m[0m * base: mirror.sale-dedic.com
 * extras: mirror.sale-dedic.com
 * updates: mirror.corbina.net
[0m[0mResolving Dependencies
--> Running transaction check
---> Package centos-release.x86_64 0:7-5.1804.el7.centos will be updated
[0m[0m---> Package centos-release.x86_64 0:7-9.2009.1.el7.centos will be an update
[0m[0m--> Finished Dependency Resolution
[0m[0m
Dependencies Resolved

================================================================================
 Package             Arch        Version                     Repository    Size
================================================================================
Updating:
 centos-release      x86_64      7-9.2009.1.el7.centos       updates       27 k

Transaction Summary
================================================================================
Upgrade  1 Package

Total download size: 27 k
Downloading packages:
[0m[0mNo Presto metadata available for updates
[0m[0mPublic key for centos-release-7-9.2009.1.el7.centos.x86_64.rpm is not installed
[0m[0mwarning: /var/cache/yum/x86_64/7/updates/packages/centos-release-7-9.2009.1.el7.centos.x86_64.rpm: Header V3 RSA/SHA256 Signature, key ID f4a80eb5: NOKEY
[0m[0mRetrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
[0m[0mImporting GPG key 0xF4A80EB5:
 Userid     : "CentOS-7 Key (CentOS 7 Official Signing Key) <security@centos.org>"
 Fingerprint: 6341 ab27 53d7 8a78 a7c2 7bb1 24c6 a8a7 f4a8 0eb5
 Package    : centos-release-7-5.1804.el7.centos.x86_64 (@anaconda)
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7
[0m[0mRunning transaction check
[0m[0mRunning transaction test
[0m[0mTransaction test succeeded
[0m[0mRunning transaction
[0m[0m  Updating   : centos-release-7-9.2009.1.el7.centos.x86_64                  1/2[0m[0m 
warning: /etc/yum/vars/contentdir created as /etc/yum/vars/contentdir.rpmnew
[0m[0m  Cleanup    : centos-release-7-5.1804.el7.centos.x86_64                    2/2[0m[0m 
  Verifying  : centos-release-7-9.2009.1.el7.centos.x86_64                  1/2[0m[0m 
  Verifying  : centos-release-7-5.1804.el7.centos.x86_64                    2/2[0m[0m 

Updated:
  centos-release.x86_64 0:7-9.2009.1.el7.centos                                 

Complete!
[0m[0mLoaded plugins: fastestmirror
[0m[0mLoading mirror speeds from cached hostfile
[0m[0m * base: mirror.sale-dedic.com
 * extras: mirror.sale-dedic.com
 * updates: mirror.corbina.net
[0m[0mNo package kernel-devel-3.10.0-862.2.3.el7.x86_64 available.
[0m[0mError: Nothing to do
[0m[0mUnmounting Virtualbox Guest Additions ISO from: /mnt[0m
[0mumount: /mnt: not mounted
[0m[1m==> lvm: Checking for guest additions in VM...[0m
[0m    lvm: No guest additions were detected on the base box for this VM! Guest
    lvm: additions are required for forwarded ports, shared folders, host only
    lvm: networking, and more. If SSH fails on this machine, please install
    lvm: the guest additions and repackage the box to continue.
    lvm: 
    lvm: This is not an error message; everything may continue to work properly,
    lvm: in which case you may ignore this message.[0m
[0;31mThe following SSH command responded with a non-zero exit status.
Vagrant assumes that this means the command failed!

umount /mnt

Stdout from the command:



Stderr from the command:

umount: /mnt: not mounted
[0m
[?2004h]0;garik@garik-VirtualBox: ~/DZ/DZ7-4garik@garik-VirtualBox:~/DZ/DZ7-4$ vagrant ssh
[?2004l]0;vagrant@garik-VirtualBox:~[?1034h[vagrant@garik-VirtualBox ~]$ sudo -i
]0;root@garik-VirtualBox:~[?1034h[root@garik-VirtualBox ~]# 6.cat -n /etc/fstab
-bash: 6.cat: command not found
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# 6.cat -n /etc/fstab[1P[1P
     1	
     2	#
     3	# /etc/fstab
     4	# Created by anaconda on Sat May 12 18:50:26 2018
     5	#
     6	# Accessible filesystems, by reference, are maintained under '/dev/disk'
     7	# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
     8	#
     9	/dev/mapper/VolGroup00-LogVol00 /                       xfs     defaults        0 0
    10	UUID=570897ca-e759-4c81-90cf-389da6eee4cc /boot                   xfs     defaults        0 0
    11	/dev/mapper/VolGroup00-LogVol01 swap                    swap    defaults        0 0
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# 7.cat -n /etc/default/grub[1P[1P
     1	GRUB_TIMEOUT=1
     2	GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
     3	GRUB_DEFAULT=saved
     4	GRUB_DISABLE_SUBMENU=true
     5	GRUB_TERMINAL_OUTPUT="console"
     6	GRUB_CMDLINE_LINUX="no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=VolGroup00/LogVol00 rd.lvm.lv=VolGroup00/LogVol01 rhgb quiet"
     7	GRUB_DISABLE_RECOVERY="true"
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# 8.cat -n /boot/grub2/grub.cfg[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[1P[1P
     1	#
     2	# DO NOT EDIT THIS FILE
     3	#
     4	# It is automatically generated by grub2-mkconfig using templates
     5	# from /etc/grub.d and settings from /etc/default/grub
     6	#
     7	
     8	### BEGIN /etc/grub.d/00_header ###
     9	set pager=1
    10	
    11	if [ -s $prefix/grubenv ]; then
    12	  load_env
    13	fi
    14	if [ "${next_entry}" ] ; then
    15	   set default="${next_entry}"
    16	   set next_entry=
    17	   save_env next_entry
    18	   set boot_once=true
    19	else
    20	   set default="${saved_entry}"
    21	fi
    22	
    23	if [ x"${feature_menuentry_id}" = xy ]; then
    24	  menuentry_id_option="--id"
    25	else
    26	  menuentry_id_option=""
    27	fi
    28	
    29	export menuentry_id_option
    30	
    31	if [ "${prev_saved_entry}" ]; then
    32	  set saved_entry="${prev_saved_entry}"
    33	  save_env saved_entry
    34	  set prev_saved_entry=
    35	  save_env prev_saved_entry
    36	  set boot_once=true
    37	fi
    38	
    39	function savedefault {
    40	  if [ -z "${boot_once}" ]; then
    41	    saved_entry="${chosen}"
    42	    save_env saved_entry
    43	  fi
    44	}
    45	
    46	function load_video {
    47	  if [ x$feature_all_video_module = xy ]; then
    48	    insmod all_video
    49	  else
    50	    insmod efi_gop
    51	    insmod efi_uga
    52	    insmod ieee1275_fb
    53	    insmod vbe
    54	    insmod vga
    55	    insmod video_bochs
    56	    insmod video_cirrus
    57	  fi
    58	}
    59	
    60	terminal_output console
    61	if [ x$feature_timeout_style = xy ] ; then
    62	  set timeout_style=menu
    63	  set timeout=1
    64	# Fallback normal timeout code in case the timeout_style feature is
    65	# unavailable.
    66	else
    67	  set timeout=1
    68	fi
    69	### END /etc/grub.d/00_header ###
    70	
    71	### BEGIN /etc/grub.d/00_tuned ###
    72	set tuned_params=""
    73	set tuned_initrd=""
    74	### END /etc/grub.d/00_tuned ###
    75	
    76	### BEGIN /etc/grub.d/01_users ###
    77	if [ -f ${prefix}/user.cfg ]; then
    78	  source ${prefix}/user.cfg
    79	  if [ -n "${GRUB2_PASSWORD}" ]; then
    80	    set superusers="root"
    81	    export superusers
    82	    password_pbkdf2 root ${GRUB2_PASSWORD}
    83	  fi
    84	fi
    85	### END /etc/grub.d/01_users ###
    86	
    87	### BEGIN /etc/grub.d/10_linux ###
    88	menuentry 'CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-862.2.3.el7.x86_64-advanced-b60e9498-0baa-4d9f-90aa-069048217fee' {
    89		load_video
    90		set gfxpayload=keep
    91		insmod gzio
    92		insmod part_msdos
    93		insmod xfs
    94		set root='hd0,msdos2'
    95		if [ x$feature_platform_search_hint = xy ]; then
    96		  search --no-floppy --fs-uuid --set=root --hint='hd0,msdos2'  570897ca-e759-4c81-90cf-389da6eee4cc
    97		else
    98		  search --no-floppy --fs-uuid --set=root 570897ca-e759-4c81-90cf-389da6eee4cc
    99		fi
   100		linux16 /vmlinuz-3.10.0-862.2.3.el7.x86_64 root=/dev/mapper/VolGroup00-LogVol00 ro no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=VolGroup00/LogVol00 rd.lvm.lv=VolGroup00/LogVol01 rhgb quiet 
   101		initrd16 /initramfs-3.10.0-862.2.3.el7.x86_64.img
   102	}
   103	if [ "x$default" = 'CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)' ]; then default='Advanced options for CentOS Linux>CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)'; fi;
   104	### END /etc/grub.d/10_linux ###
   105	
   106	### BEGIN /etc/grub.d/20_linux_xen ###
   107	### END /etc/grub.d/20_linux_xen ###
   108	
   109	### BEGIN /etc/grub.d/20_ppc_terminfo ###
   110	### END /etc/grub.d/20_ppc_terminfo ###
   111	
   112	### BEGIN /etc/grub.d/30_os-prober ###
   113	### END /etc/grub.d/30_os-prober ###
   114	
   115	### BEGIN /etc/grub.d/40_custom ###
   116	# This file provides an easy way to add custom menu entries.  Simply type the
   117	# menu entries you want to add after this comment.  Be careful not to change
   118	# the 'exec tail' line above.
   119	### END /etc/grub.d/40_custom ###
   120	
   121	### BEGIN /etc/grub.d/41_custom ###
   122	if [ -f  ${config_directory}/custom.cfg ]; then
   123	  source ${config_directory}/custom.cfg
   124	elif [ -z "${config_directory}" -a -f  $prefix/custom.cfg ]; then
   125	  source $prefix/custom.cfg;
   126	fi
   127	### END /etc/grub.d/41_custom ###
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# vgrename VolGroup00 Garik
  Volume group "VolGroup00" successfully renamed to "Garik"
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# sed -i 's*VolGroup00*Garik*g' /etc/fstab
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# sed -i 's*VolGroup00*Garik*g' /etc/default/grub
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# sed -i 's*VolGroup00*Garik*g' /boot/grub2/grub.cfg
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# cat -n /etc/fstab
     1	
     2	#
     3	# /etc/fstab
     4	# Created by anaconda on Sat May 12 18:50:26 2018
     5	#
     6	# Accessible filesystems, by reference, are maintained under '/dev/disk'
     7	# See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info
     8	#
     9	/dev/mapper/Garik-LogVol00 /                       xfs     defaults        0 0
    10	UUID=570897ca-e759-4c81-90cf-389da6eee4cc /boot                   xfs     defaults        0 0
    11	/dev/mapper/Garik-LogVol01 swap                    swap    defaults        0 0
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# cat -n /etc/default/grub
     1	GRUB_TIMEOUT=1
     2	GRUB_DISTRIBUTOR="$(sed 's, release .*$,,g' /etc/system-release)"
     3	GRUB_DEFAULT=saved
     4	GRUB_DISABLE_SUBMENU=true
     5	GRUB_TERMINAL_OUTPUT="console"
     6	GRUB_CMDLINE_LINUX="no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=Garik/LogVol00 rd.lvm.lv=Garik/LogVol01 rhgb quiet"
     7	GRUB_DISABLE_RECOVERY="true"
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# cat -n /boot/grub2/grub.cfg
     1	#
     2	# DO NOT EDIT THIS FILE
     3	#
     4	# It is automatically generated by grub2-mkconfig using templates
     5	# from /etc/grub.d and settings from /etc/default/grub
     6	#
     7	
     8	### BEGIN /etc/grub.d/00_header ###
     9	set pager=1
    10	
    11	if [ -s $prefix/grubenv ]; then
    12	  load_env
    13	fi
    14	if [ "${next_entry}" ] ; then
    15	   set default="${next_entry}"
    16	   set next_entry=
    17	   save_env next_entry
    18	   set boot_once=true
    19	else
    20	   set default="${saved_entry}"
    21	fi
    22	
    23	if [ x"${feature_menuentry_id}" = xy ]; then
    24	  menuentry_id_option="--id"
    25	else
    26	  menuentry_id_option=""
    27	fi
    28	
    29	export menuentry_id_option
    30	
    31	if [ "${prev_saved_entry}" ]; then
    32	  set saved_entry="${prev_saved_entry}"
    33	  save_env saved_entry
    34	  set prev_saved_entry=
    35	  save_env prev_saved_entry
    36	  set boot_once=true
    37	fi
    38	
    39	function savedefault {
    40	  if [ -z "${boot_once}" ]; then
    41	    saved_entry="${chosen}"
    42	    save_env saved_entry
    43	  fi
    44	}
    45	
    46	function load_video {
    47	  if [ x$feature_all_video_module = xy ]; then
    48	    insmod all_video
    49	  else
    50	    insmod efi_gop
    51	    insmod efi_uga
    52	    insmod ieee1275_fb
    53	    insmod vbe
    54	    insmod vga
    55	    insmod video_bochs
    56	    insmod video_cirrus
    57	  fi
    58	}
    59	
    60	terminal_output console
    61	if [ x$feature_timeout_style = xy ] ; then
    62	  set timeout_style=menu
    63	  set timeout=1
    64	# Fallback normal timeout code in case the timeout_style feature is
    65	# unavailable.
    66	else
    67	  set timeout=1
    68	fi
    69	### END /etc/grub.d/00_header ###
    70	
    71	### BEGIN /etc/grub.d/00_tuned ###
    72	set tuned_params=""
    73	set tuned_initrd=""
    74	### END /etc/grub.d/00_tuned ###
    75	
    76	### BEGIN /etc/grub.d/01_users ###
    77	if [ -f ${prefix}/user.cfg ]; then
    78	  source ${prefix}/user.cfg
    79	  if [ -n "${GRUB2_PASSWORD}" ]; then
    80	    set superusers="root"
    81	    export superusers
    82	    password_pbkdf2 root ${GRUB2_PASSWORD}
    83	  fi
    84	fi
    85	### END /etc/grub.d/01_users ###
    86	
    87	### BEGIN /etc/grub.d/10_linux ###
    88	menuentry 'CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)' --class centos --class gnu-linux --class gnu --class os --unrestricted $menuentry_id_option 'gnulinux-3.10.0-862.2.3.el7.x86_64-advanced-b60e9498-0baa-4d9f-90aa-069048217fee' {
    89		load_video
    90		set gfxpayload=keep
    91		insmod gzio
    92		insmod part_msdos
    93		insmod xfs
    94		set root='hd0,msdos2'
    95		if [ x$feature_platform_search_hint = xy ]; then
    96		  search --no-floppy --fs-uuid --set=root --hint='hd0,msdos2'  570897ca-e759-4c81-90cf-389da6eee4cc
    97		else
    98		  search --no-floppy --fs-uuid --set=root 570897ca-e759-4c81-90cf-389da6eee4cc
    99		fi
   100		linux16 /vmlinuz-3.10.0-862.2.3.el7.x86_64 root=/dev/mapper/Garik-LogVol00 ro no_timer_check console=tty0 console=ttyS0,115200n8 net.ifnames=0 biosdevname=0 elevator=noop crashkernel=auto rd.lvm.lv=Garik/LogVol00 rd.lvm.lv=Garik/LogVol01 rhgb quiet 
   101		initrd16 /initramfs-3.10.0-862.2.3.el7.x86_64.img
   102	}
   103	if [ "x$default" = 'CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)' ]; then default='Advanced options for CentOS Linux>CentOS Linux (3.10.0-862.2.3.el7.x86_64) 7 (Core)'; fi;
   104	### END /etc/grub.d/10_linux ###
   105	
   106	### BEGIN /etc/grub.d/20_linux_xen ###
   107	### END /etc/grub.d/20_linux_xen ###
   108	
   109	### BEGIN /etc/grub.d/20_ppc_terminfo ###
   110	### END /etc/grub.d/20_ppc_terminfo ###
   111	
   112	### BEGIN /etc/grub.d/30_os-prober ###
   113	### END /etc/grub.d/30_os-prober ###
   114	
   115	### BEGIN /etc/grub.d/40_custom ###
   116	# This file provides an easy way to add custom menu entries.  Simply type the
   117	# menu entries you want to add after this comment.  Be careful not to change
   118	# the 'exec tail' line above.
   119	### END /etc/grub.d/40_custom ###
   120	
   121	### BEGIN /etc/grub.d/41_custom ###
   122	if [ -f  ${config_directory}/custom.cfg ]; then
   123	  source ${config_directory}/custom.cfg
   124	elif [ -z "${config_directory}" -a -f  $prefix/custom.cfg ]; then
   125	  source $prefix/custom.cfg;
   126	fi
   127	### END /etc/grub.d/41_custom ###
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# mkinitrd -f -v /boot/initramfs-$(uname -r).img $(uname -r)
Executing: /sbin/dracut -f -v /boot/initramfs-3.10.0-862.2.3.el7.x86_64.img 3.10.0-862.2.3.el7.x86_64
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
*** Including module: bash ***
*** Including module: nss-softokn ***
*** Including module: i18n ***
*** Including module: drm ***
*** Including module: plymouth ***
*** Including module: dm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 60-persistent-storage-dm.rules
Skipping udev rule: 55-dm.rules
*** Including module: kernel-modules ***
Omitting driver floppy
*** Including module: lvm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 56-lvm.rules
Skipping udev rule: 60-persistent-storage-lvm.rules
*** Including module: qemu ***
*** Including module: resume ***
*** Including module: rootfs-block ***
*** Including module: terminfo ***
*** Including module: udev-rules ***
Skipping udev rule: 40-redhat-cpu-hotplug.rules
Skipping udev rule: 91-permissions.rules
*** Including module: biosdevname ***
*** Including module: systemd ***
*** Including module: usrmount ***
*** Including module: base ***
*** Including module: fs-lib ***
*** Including module: shutdown ***
*** Including modules done ***
*** Installing kernel module dependencies and firmware ***
*** Installing kernel module dependencies and firmware done ***
*** Resolving executable dependencies ***
*** Resolving executable dependencies done***
*** Hardlinking files ***
*** Hardlinking files done ***
*** Stripping files ***
*** Stripping files done ***
*** Generating early-microcode cpio image contents ***
*** No early-microcode cpio image needed ***
*** Store current command line parameters ***
*** Creating image file ***
*** Creating image file done ***
*** Creating initramfs image file '/boot/initramfs-3.10.0-862.2.3.el7.x86_64.img' done ***
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# mkdir /usr/lib/dracut/modules.d/01test
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# ls -la /usr/lib/dracut/modules.d/01test
total 4
drwxr-xr-x.  2 root root    6 May 14 17:49 [0m[01;34m.[0m
drwxr-xr-x. 52 root root 4096 May 14 17:49 [01;34m..[0m
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# echo '#!/bin/bash
> check()
> {
>     return 0
> }
> depends()
> {
>     return 0
> }
> install()
> { 
> inst_hook cleanup 00 "${moddir}/test.sh"
> }' > /usr/lib/dracut/modules.d/01test/module-setup.sh
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# echo '#!/bin/bash
check()
{
    return 0
}
depends()
{
    return 0
}
install()
{ 
inst_hook cleanup 00 "${moddir}/test.sh"
}' > /usr/lib/dracut/modules.d/01test/module-setup.sh[A[A[A[A[A[A[A[A[A[A[A[A[K
[K
[K
[K
[K
[K
[K
[K
[K
[K
[K
[K
[K[A[A[A[A[A[A[A[A[A[A[A[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cecho '#!/bin/bash
check()
{
    return 0
}
depends()
{
    return 0
}
install()
{ 
inst_hook cleanup 00 "${moddir}/test.sh"
}' > /usr/lib/dracut/modules.d/01test/module-setup.sh[A[A[A[A[A[A[A[A[A[A[A[Als -la /usr/lib/dracut/modules.d/01test
[K
[K
[K
[K
[K
[K
[K
[K
[K
[K
[K
[K[A[A[A[A[A[A[A[A[A[A[A[A[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C
total 8
drwxr-xr-x.  2 root root   29 May 14 17:50 [0m[01;34m.[0m
drwxr-xr-x. 52 root root 4096 May 14 17:49 [01;34m..[0m
-rw-r--r--.  1 root root  120 May 14 17:50 module-setup.sh
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# cat /usr/lib/dracut/modules.d/01test/module-setup.sh
#!/bin/bash
check()
{
    return 0
}
depends()
{
    return 0
}
install()
{ 
inst_hook cleanup 00 "${moddir}/test.sh"
}
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# cat > /usr/lib/dracut/modules.d/01test/test.sh
#!/bin/bash

exec 0<>/dev/console 1<>/dev/console 2<>/dev/console
cat <<'msgend'
Hello! You are in dracut module!
 ___________________
< I'm dracut module >
 -------------------
   \
    \
        .--.
 |o_o |
       |:_/ |
      //   \ \
     (|     | )
    /'\_   _/`\
    \___)=(___/
msgend
sleep 10
echo " continuing...."
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# cat > /usr/lib/dracut/modules.d/01test/test.sh[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C/usr/lib/dracut/modules.d/01test/module-setup.sh[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[13Pls -la /usr/lib/dracut/modules.d/01test
total 12
drwxr-xr-x.  2 root root   44 May 14 17:51 [0m[01;34m.[0m
drwxr-xr-x. 52 root root 4096 May 14 17:49 [01;34m..[0m
-rw-r--r--.  1 root root  120 May 14 17:50 module-setup.sh
-rw-r--r--.  1 root root  326 May 14 17:51 test.sh
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# cat -n /usr/lib/dracut/modules.d/01test/test.sh
     1	#!/bin/bash
     2	
     3	exec 0<>/dev/console 1<>/dev/console 2<>/dev/console
     4	cat <<'msgend'
     5	Hello! You are in dracut module!
     6	 ___________________
     7	< I'm dracut module >
     8	 -------------------
     9	   \
    10	    \
    11	        .--.
    12	 |o_o |
    13	       |:_/ |
    14	      //   \ \
    15	     (|     | )
    16	    /'\_   _/`\
    17	    \___)=(___/
    18	msgend
    19	sleep 10
    20	echo " continuing...."
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# dracut -f -v
Executing: /sbin/dracut -f -v
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
dracut module 'busybox' will not be installed, because command 'busybox' could not be found!
dracut module 'crypt' will not be installed, because command 'cryptsetup' could not be found!
dracut module 'dmraid' will not be installed, because command 'dmraid' could not be found!
dracut module 'dmsquash-live-ntfs' will not be installed, because command 'ntfs-3g' could not be found!
dracut module 'mdraid' will not be installed, because command 'mdadm' could not be found!
dracut module 'multipath' will not be installed, because command 'multipath' could not be found!
*** Including module: bash ***
*** Including module: test ***
*** Including module: nss-softokn ***
*** Including module: i18n ***
*** Including module: drm ***
*** Including module: plymouth ***
*** Including module: dm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 60-persistent-storage-dm.rules
Skipping udev rule: 55-dm.rules
*** Including module: kernel-modules ***
Omitting driver floppy
*** Including module: lvm ***
Skipping udev rule: 64-device-mapper.rules
Skipping udev rule: 56-lvm.rules
Skipping udev rule: 60-persistent-storage-lvm.rules
*** Including module: qemu ***
*** Including module: resume ***
*** Including module: rootfs-block ***
*** Including module: terminfo ***
*** Including module: udev-rules ***
Skipping udev rule: 40-redhat-cpu-hotplug.rules
Skipping udev rule: 91-permissions.rules
*** Including module: biosdevname ***
*** Including module: systemd ***
*** Including module: usrmount ***
*** Including module: base ***
*** Including module: fs-lib ***
*** Including module: shutdown ***
*** Including modules done ***
*** Installing kernel module dependencies and firmware ***
*** Installing kernel module dependencies and firmware done ***
*** Resolving executable dependencies ***
*** Resolving executable dependencies done***
*** Hardlinking files ***
*** Hardlinking files done ***
*** Stripping files ***
*** Stripping files done ***
*** Generating early-microcode cpio image contents ***
*** No early-microcode cpio image needed ***
*** Store current command line parameters ***
*** Creating image file ***
*** Creating image file done ***
*** Creating initramfs image file '/boot/initramfs-3.10.0-862.2.3.el7.x86_64.img' done ***
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# lsinitrd -m /boot/initramfs-$(uname -r).img | grep test
[01;31m[Ktest[m[K
]0;root@garik-VirtualBox:~[root@garik-VirtualBox ~]# reboot
Connection to 127.0.0.1 closed by remote host.
[?2004h]0;garik@garik-VirtualBox: ~/DZ/DZ7-4garik@garik-VirtualBox:~/DZ/DZ7-4$ exit
[?2004lexit

Script done on 2023-05-15 00:53:11+07:00 [COMMAND_EXIT_CODE="255"]
